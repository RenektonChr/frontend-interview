## 为什么会有Event Loop
+ JavaScript的任务分两种，同步和异步。同步任务直接在主线程执行。异步任务则会放进任务队列中。
+ 多个异步任务会在任务队列中排队，依次执行，执行不到的在队列中等待。
+ JS是单线程的，单线程是指js引擎中解析和执行js代码的线程只有一个（主线程），每次只能做一件事，所以像ajax这种异步任务，主线程在等待回应的过程中会去做其他的事情，ajax的回调函数，就会被放在任务队列中等待执行。这样做就不会造成线程阻塞。

## 浏览器中的Event Loop
+ 宏任务（macro）：setTimeout、setInterval、script（整体的JS代码）、I/O操作、UI渲染等。
+ 微任务（micro）：Promise、MutationObserve等。
+ requestAnimationFrame

## Event Loop的过程
1. 检查macrotask队列是否为空，非空则到2。
2. 执行macrotask中的一个任务。
3. 继续检查mictask队列是否为空，若有则到4，否则到5。
4. 取出microtask中的任务执行，执行完成返回到步骤3。
5. 执行视图更新。

  
总结：当某个宏任务执行完成之后，会检查微任务队列是否为空，如果不为空则执行微任务队列中的任务，直到执行完所有微任务。如果不为空，则会执行宏任务队列中排在最前面的任务，如果在执行宏任务过程中遇到微任务，则把微任务添加到任务队列中。执行完当前的宏任务，再次检查微任务队列，以此类推。
  
## Node中的Event Loop
+ Node中的Event Loop和浏览器中的完全不同，以后再说....   